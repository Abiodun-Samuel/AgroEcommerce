import{r as v,P as w,o as n,a as c,b as o,u as t,X as F,w as h,d as e,g as x,j as A,C as B,i as b,F as C,e as O,t as y,q as L,k as p,p as V,l as $}from"./app.636801a9.js";import{A as j}from"./AdminLayout.c2efef3c.js";import{D as M}from"./DashboardBreadcrump.d592429a.js";import{_ as T}from"./FormError.443f658c.js";import{_ as U}from"./NoResult.97c56a94.js";import{M as q}from"./Modal.23ac1dc4.js";import{I as m}from"./iconify.65236bb7.js";import{_ as P}from"./_plugin-vue_export-helper.cdc0426e.js";/* empty css                                                              */const r=d=>(V("data-v-00588077"),d=d(),$(),d),R=r(()=>e("hr",null,null,-1)),z={class:"container"},J={class:"row"},X={class:"col-lg-12"},Y={class:"category mb-2"},G={class:"accordion accordion-flush",id:"accordionFlushExample"},H={class:"accordion-item"},K={class:"accordion-header",id:"flush-headingOne"},Q={class:"accordion-button collapsed fw-bolder text-light shadow-sm bg-success",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"},W={id:"flush-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"flush-headingOne","data-bs-parent":"#accordionFlushExample"},Z={class:"accordion-body p-1"},ee={class:"row"},te={class:"my-1 col-lg-6 col-md-6"},se=r(()=>e("label",{for:"category_title",class:"form-label"},"Category Title",-1)),oe={class:"my-1 col-lg-6 col-md-6"},le=r(()=>e("label",{for:"category_image",class:"form-label"},"Category Image",-1)),ae={key:0,class:"img_container mt-1"},ne=["src"],ce={class:"col-lg-12"},re=["disabled"],ie=r(()=>e("span",null,"Save",-1)),de={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},_e={class:"row"},ue={class:"col-lg-12"},ge={class:"category__table mt-2"},he={key:0,class:"table-responsive"},me={class:"table table-hover table-bordered"},pe=r(()=>e("thead",{class:"table-dark"},[e("tr",null,[e("th",{scope:"col"},"S/N"),e("th",{scope:"col"},"Id"),e("th",{scope:"col"},"Image"),e("th",{scope:"col"},"Title"),e("th",{scope:"col"},"Actions")])],-1)),be={scope:"row"},ye={scope:"row"},fe=["src"],ve={class:"d-flex gap-2 justify-content-start align-items-center"},we=["onClick"],xe={key:1,class:"text-center"},Ce={class:"modal-title text-warning d-flex align-items-center gap-1 fw-bolder"},ke=r(()=>e("h5",{class:"fw-bold text-secondary"}," All Subcategories and Products attached to this category will also be deleted. ",-1)),Ie=r(()=>e("p",{class:"text-danger"},"Are you sure you want to delete this category?",-1)),Se={class:"d-flex gap-1 align-items-center"},Ne=r(()=>e("span",null,"Yes, Delete",-1)),De={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},Ee={__name:"CategoryIndex",props:["categories"],setup(d){let _=v(null);const u=v(!1),l=w({category_img:null,category_title:null,folder:"category"}),g=w({id:null}),k={slug:"Category",link:!1,route_name:null};function I(i){const a=l.category_img=i.target.files[0],s=new FileReader;s.onloadend=()=>{_.value=s.result},s.readAsDataURL(a)}function S(){const i=document.getElementById("category_image");i.value=null,_.value=null}const N=()=>{g.delete(route("admin.category.destroy",g.id),{preserveScroll:!0,onSuccess:()=>{p.success("Category has been deleted successfully"),g.reset(),u.value=!1},onError:()=>{p.error("Unable to delete this category")}})},D=()=>{l.clearErrors();const i=document.getElementById("category_image");l.post(route("admin.category.store"),{preserveScroll:!0,onSuccess:()=>{p.success("New category has been saved successfully"),l.reset(),i.value=null,_.value=null},onError:()=>{p.error("Unable to save new category")}})};return(i,a)=>(n(),c(C,null,[o(t(F),{title:"Category"}),o(j,null,{default:h(()=>[o(M,{step_one:k}),R,e("div",z,[o(T,{errors:t(l).errors},null,8,["errors"]),e("div",J,[e("div",X,[e("div",Y,[e("div",G,[e("div",H,[e("h2",K,[e("button",Q,[o(t(m),{icon:"eos-icons:content-new",class:"me-1 text-light",height:"20"}),x(" Category ")])]),e("div",W,[e("div",Z,[e("div",ee,[e("div",te,[se,A(e("input",{type:"text",class:"form-control",id:"category_title",placeholder:"category","onUpdate:modelValue":a[0]||(a[0]=s=>t(l).category_title=s)},null,512),[[B,t(l).category_title]])]),e("div",oe,[e("div",null,[le,e("input",{type:"file",class:"form-control",id:"category_image",accept:".jpg, .jpeg, .png",onChange:a[1]||(a[1]=s=>I(s))},null,32)]),t(_)?(n(),c("div",ae,[e("img",{src:t(_),alt:"category preview",width:"100"},null,8,ne),e("button",{onClick:S},[o(t(m),{color:"text-danger",icon:"material-symbols:edit",height:"15"})])])):b("",!0)]),e("div",ce,[e("button",{disabled:t(l).processing||!t(l).category_img||!t(l).category_title,onClick:D,class:"btn btn-success"},[ie,t(l).processing?(n(),c("span",de)):b("",!0)],8,re)])])])])])])])])]),e("div",_e,[e("div",ue,[e("div",ge,[d.categories.length?(n(),c("div",he,[e("table",me,[pe,e("tbody",null,[(n(!0),c(C,null,O(d.categories,(s,E)=>{var f;return n(),c("tr",{key:s.id},[e("th",be,y(E+1),1),e("td",ye,y(s.id.substring(0,7))+"...",1),e("td",null,[e("img",{width:"40",src:(f=JSON.parse(s.banner_img))==null?void 0:f.img_url,alt:"category image"},null,8,fe)]),e("td",null,y(s.title),1),e("td",ve,[o(t(L),{href:i.route("admin.category.edit",s.id),class:"btn btn-success btn-sm"},{default:h(()=>[o(t(m),{icon:"material-symbols:edit-square-outline",height:"17"})]),_:2},1032,["href"]),e("button",{onClick:Fe=>{u.value=!0,t(g).id=s.id},class:"btn btn-danger btn-sm"},[o(t(m),{icon:"ic:outline-delete-forever",height:"17"})],8,we)])])}),128))])])])):(n(),c("div",xe,[o(U,{text:"No categories found",link:!1})]))])])])])]),_:1}),o(q,{show:u.value,size:"modal-sm",footer:!0,onClose:a[3]||(a[3]=s=>u.value=!1)},{header:h(()=>[e("h4",Ce,[o(t(m),{icon:"icon-park-outline:caution"}),x(" Caution ")])]),body:h(()=>[ke,Ie]),footer:h(()=>[e("div",Se,[e("button",{onClick:N,class:"btn btn-sm btn-danger"},[Ne,t(g).processing?(n(),c("span",De)):b("",!0)]),e("button",{onClick:a[2]||(a[2]=s=>u.value=!1),class:"btn btn-sm btn-success"}," No, Cancel ")])]),_:1},8,["show"])],64))}},Ue=P(Ee,[["__scopeId","data-v-00588077"]]);export{Ue as default};
