import{r as x,P as w,o as r,a,b as n,u as e,X as A,w as h,d as o,g as k,j as P,C,i as v,F as I,e as L,t as g,q as U,k as f,y as S,p as j,l as M}from"./app.281e0c63.js";import{A as R}from"./AdminLayout.8a21602c.js";import{D as T}from"./DashboardBreadcrump.8e740981.js";import{I as b}from"./iconify.a9b16b93.js";import{M as $}from"./Modal.38fa62a9.js";import{_ as q}from"./_plugin-vue_export-helper.cdc0426e.js";/* empty css                                                              */const i=d=>(j("data-v-6c554af1"),d=d(),M(),d),z=i(()=>o("hr",null,null,-1)),J={class:"container"},X={class:"row"},Y={class:"col-lg-12"},G={class:"promotion mb-2 shadow-sm bg-white rounded"},H={class:"accordion accordion-flush",id:"accordionFlushExample"},K={class:"accordion-item"},Q={class:"accordion-header",id:"flush-headingOne"},W={class:"accordion-button collapsed fw-bolder text-light shadow-sm bg-success",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"},Z={id:"flush-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"flush-headingOne","data-bs-parent":"#accordionFlushExample"},oo={class:"accordion-body p-1"},eo={class:"row"},to={class:"my-1 col-lg-4 col-md-6 col-sm-6"},so=i(()=>o("label",{for:"promotion_title",class:"form-label"},"Promotion Title",-1)),lo=i(()=>o("small",{class:"text-danger fst-italic small"},"(Optional)",-1)),no={class:"my-1 col-lg-4 col-md-6 col-sm-6"},io=i(()=>o("label",{for:"promotion_title",class:"form-label"},"Promotion Description",-1)),ro=i(()=>o("small",{class:"text-danger fst-italic small"},"(Optional)",-1)),ao={class:"my-1 col-lg-4 col-md-6 col-sm-6"},co=i(()=>o("label",{for:"promotion_image",class:"form-label"},"Promotion Image",-1)),mo={key:0,class:"img_container mt-1"},_o=["src"],uo={class:"col-lg-12"},po=["disabled"],ho=i(()=>o("span",null,"Save",-1)),bo={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},go={class:"row"},fo={class:"col-lg-12"},vo={class:"promotion__table mt-2"},yo={key:0,class:"table-responsive"},xo={class:"table table-hover table-bordered"},wo=i(()=>o("thead",{class:"table-dark"},[o("tr",null,[o("th",{scope:"col"},"S/N"),o("th",{scope:"col"},"Id"),o("th",{scope:"col"},"Image"),o("th",{scope:"col"},"Title"),o("th",{scope:"col"},"Description"),o("th",{scope:"col"},"Actions")])],-1)),ko={scope:"row"},Po={scope:"row"},Co=["src"],Io={class:"d-flex gap-2 justify-content-start align-items-center"},So=["onClick"],Do={key:1,class:"text-center"},No={class:"modal-title text-warning d-flex align-items-center gap-1 fw-bolder"},Eo=i(()=>o("p",{class:"text-danger lead"}," Are you sure you want to delete this promotion? ",-1)),Fo=["disabled"],Oo=i(()=>o("span",null,"Yes, Delete",-1)),Bo={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},Vo={__name:"PromotionIndex",props:["promotions"],setup(d){const _=x(!1);let u=x(null);const D={slug:"Promotions",link:!1,route_name:null},s=w({promotion_img:null,promotion_title:null,promotion_desc:null,folder:"promotion"}),m=w({id:null});function N(c){const l=s.promotion_img=c.target.files[0],p=new FileReader;p.onloadend=()=>{u.value=p.result},p.readAsDataURL(l)}function E(){const c=document.getElementById("promotion_image");c.value=null,u.value=null}const F=()=>{s.clearErrors();const c=document.getElementById("promotion_image");s.post(route("admin.promotion.store"),{preserveScroll:!0,onSuccess:()=>{f.success("New promotion has been saved successfully"),s.reset(),c.value=null,u.value=null},onError:()=>{f.error("Unable to save new promotion")}})},O=()=>{m.delete(route("admin.promotion.destroy",m.id),{preserveScroll:!0,onSuccess:()=>{f.success("Promotion has been deleted successfully"),m.reset(),_.value=!1},onError:()=>{f.error("Unable to delete this promotion")}})};return(c,l)=>{const p=S("FormError"),B=S("NoResult");return r(),a(I,null,[n(e(A),{title:"Promotions"}),n(R,null,{default:h(()=>[n(T,{step_one:D}),z,o("div",J,[n(p,{errors:e(s).errors},null,8,["errors"]),o("div",X,[o("div",Y,[o("div",G,[o("div",H,[o("div",K,[o("h2",Q,[o("button",W,[n(e(b),{icon:"eos-icons:content-new",class:"me-1 text-light",height:"20"}),k(" Promotion ")])]),o("div",Z,[o("div",oo,[o("div",eo,[o("div",to,[so,P(o("input",{type:"text",class:"form-control",id:"promotion_title",placeholder:"Promotion title","onUpdate:modelValue":l[0]||(l[0]=t=>e(s).promotion_title=t)},null,512),[[C,e(s).promotion_title]]),lo]),o("div",no,[io,P(o("input",{type:"text",class:"form-control",id:"promotion_title",placeholder:"Promotion Description","onUpdate:modelValue":l[1]||(l[1]=t=>e(s).promotion_desc=t)},null,512),[[C,e(s).promotion_desc]]),ro]),o("div",ao,[o("div",null,[co,o("input",{type:"file",class:"form-control",id:"promotion_image",accept:".jpg, .jpeg, .png",onChange:l[2]||(l[2]=t=>N(t))},null,32)]),e(u)?(r(),a("div",mo,[o("img",{src:e(u),alt:"promotion preview",width:"100"},null,8,_o),o("button",{onClick:E},[n(e(b),{color:"text-danger",icon:"material-symbols:edit",height:"15"})])])):v("",!0)]),o("div",uo,[o("button",{disabled:e(s).processing||!e(s).promotion_img,onClick:F,class:"btn btn-success"},[ho,e(s).processing?(r(),a("span",bo)):v("",!0)],8,po)])])])])])])])])]),o("div",go,[o("div",fo,[o("div",vo,[d.promotions.length?(r(),a("div",yo,[o("table",xo,[wo,o("tbody",null,[(r(!0),a(I,null,L(d.promotions,(t,V)=>{var y;return r(),a("tr",{key:t.id},[o("th",ko,g(V+1),1),o("td",Po,g(t.id.substring(0,7))+"...",1),o("td",null,[o("img",{width:"40",src:(y=JSON.parse(t.banner_img))==null?void 0:y.img_url,alt:"promotion image"},null,8,Co)]),o("td",null,g(t.title),1),o("td",null,g(t.description),1),o("td",Io,[n(e(U),{href:c.route("admin.promotion.edit",t.id),class:"btn btn-success btn-sm"},{default:h(()=>[n(e(b),{icon:"material-symbols:edit-square-outline",height:"17"})]),_:2},1032,["href"]),o("button",{onClick:Ao=>{_.value=!0,e(m).id=t.id},class:"btn btn-danger btn-sm"},[n(e(b),{icon:"ic:outline-delete-forever",height:"17"})],8,So)])])}),128))])])])):(r(),a("div",Do,[n(B,{text:"No categories found",link:!1})]))])])])])]),_:1}),n($,{show:_.value,size:"modal-sm",footer:!0,onClose:l[4]||(l[4]=t=>_.value=!1)},{header:h(()=>[o("h4",No,[n(e(b),{icon:"icon-park-outline:caution"}),k(" Caution ")])]),body:h(()=>[Eo]),footer:h(()=>[o("div",null,[o("button",{disabled:e(m).processing,onClick:O,class:"btn btn-sm btn-danger mx-1"},[Oo,e(m).processing?(r(),a("span",Bo)):v("",!0)],8,Fo),o("button",{onClick:l[3]||(l[3]=t=>_.value=!1),class:"btn btn-sm btn-success"}," No, Cancel ")])]),_:1},8,["show"])],64)}}},qo=q(Vo,[["__scopeId","data-v-6c554af1"]]);export{qo as default};
