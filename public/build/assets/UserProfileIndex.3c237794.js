import{c as G,r as h,P as E,o as i,a as d,b as u,u as t,X as O,w as x,d as e,t as v,g as S,j as c,C as b,v as I,F as D,e as M,i as C,D as U,E as Y,k as g,G as T,p as z,l as J,J as X}from"./app.636801a9.js";import{U as q}from"./UserLayout.cac8aeba.js";import{D as H}from"./DashboardBreadcrump.d592429a.js";import{_ as P}from"./FormError.443f658c.js";import{M as K}from"./Modal.23ac1dc4.js";import{a as Q,C as W}from"./avatar.35d7e383.js";import{I as Z}from"./iconify.65236bb7.js";import{C as ee,S as se}from"./state.d698205e.js";import{_ as te}from"./_plugin-vue_export-helper.cdc0426e.js";/* empty css                                                              */const a=y=>(z("data-v-f47f18b1"),y=y(),J(),y),oe=a(()=>e("hr",null,null,-1)),le={class:"container"},ae={class:"row my-1"},ne={class:"col-lg-12"},re={class:"profile d-flex gap-2 align-items-center"},ie={class:"profile__img position-relative"},de=["src"],ce=["src"],ue={class:"profile__details"},pe=a(()=>e("b",null,"Name: ",-1)),me={class:"text-secondary"},_e=a(()=>e("b",null,"Email: ",-1)),fe={class:"text-secondary"},he=a(()=>e("b",null,"Role:",-1)),ve={class:"text-secondary"},be=a(()=>e("hr",null,null,-1)),ge={class:"bg-white shadow-sm p-1 mb-1 rounded"},ye={class:"row"},we={class:"col-lg-3 col-md-6 col-6 my-1"},xe=a(()=>e("label",{for:"email",class:"form-label"},"Email",-1)),Ce={class:"col-lg-3 col-md-6 col-6 my-1"},Ue=a(()=>e("label",{for:"Gender",class:"form-label"},"Gender",-1)),ke=a(()=>e("option",{selected:"",disabled:""},"Select gender",-1)),Se=a(()=>e("option",{value:"Male"},"Male",-1)),Ie=a(()=>e("option",{value:"Female"},"Female",-1)),De=a(()=>e("option",{value:"Others"},"Others",-1)),Pe=[ke,Se,Ie,De],Ve={class:"col-lg-3 col-md-6 col-6 my-1"},Ee=a(()=>e("label",{for:"phone",class:"form-label"},"Phone",-1)),Me={class:"col-lg-3 col-md-6 col-6 my-1"},Ye=a(()=>e("label",{for:"address",class:"form-label"},"Address",-1)),$e={class:"bg-white shadow-sm p-1 mb-1 rounded"},je={class:"row"},Fe={class:"col-lg-3 col-md-6 col-6 my-1"},Be=a(()=>e("label",{for:"country",class:"form-label"},"Country",-1)),Le=["value"],Ne={class:"col-lg-3 col-md-6 col-6 my-1"},Re=a(()=>e("label",{for:"state",class:"form-label"},"State",-1)),Ae=["value"],Ge={class:"col-lg-3 col-md-6 col-6 my-1"},Oe=a(()=>e("label",{for:"city",class:"form-label"},"City",-1)),Te={class:"col-lg-3 col-md-6 col-6 my-1"},ze=a(()=>e("label",{for:"date",class:"form-label"},"Date of birth",-1)),Je=a(()=>e("span",{class:"small text-danger fw-light fst-italic"},"Must be greater than 18years old ",-1)),Xe={class:"bg-white shadow-sm p-1 rounded"},qe={class:"row"},He={class:"col-lg-12 text-end"},Ke=["disabled"],Qe=a(()=>e("span",null,"Update",-1)),We={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},Ze=a(()=>e("h4",{class:"modal-title text-warning d-flex align-items-center gap-1 fw-bolder"}," Profile Image ",-1)),es={class:"d-flex justify-content-center align-items-center gap-2 mb-2"},ss={class:"spinner-border spinner-border-sm text-success"},ts=a(()=>e("hr",null,null,-1)),os={class:"passport d-flex justify-content-between"},ls={key:0,class:"file-input"},as=a(()=>e("div",{class:"d-flex justify-content-center align-items-center"},[e("label",{class:"file-input__label",for:"file-input"},[e("p",{class:"btn btn-primary p-1"},"Upload picture")])],-1)),ns={key:1,class:"camera"},rs={key:0,class:"show_preview position-relative text-center"},is=["src"],ds=["disabled"],cs={class:"spinner-border spinner-border-sm text-white"},us={__name:"UserProfileIndex",setup(y){const n=G(()=>X().props.auth.user),$=h(ee.getAllCountries()),V=h([]),j=r=>{V.value=se.getStatesOfCountry(r.isoCode)};let p=h("upload");const w=h(!1),k=h();let _=h(null),f=h(!1);const m=E({avatar:"",folder:"user"}),l=E({gender:n.value.gender,phone:n.value.phone,address:n.value.address,city:n.value.city,state:n.value.state,country:n.value.country,email:n.value.email,dob:n.value.dob}),F={slug:"Profile",link:!1,route_name:null},B=async()=>{var s,o;await((s=k.value)==null?void 0:s.snapshot({width:150,height:150},"image/png",.5));const r=(o=k.value)==null?void 0:o.canvas.toDataURL("image/png");_.value=r,m.avatar=r};function L(r){const s=new FileReader;s.onloadend=()=>{_.value=s.result,m.avatar=s.result},s.readAsDataURL(r.target.files[0])}function N(){const r=document.getElementById("file-input");r&&(r.value=null),_.value=null}const R=()=>{m.clearErrors();const r=document.getElementById("file-input");m.post(route("user.update-avatar",n.value.id),{preserveScroll:!0,onSuccess:()=>{g.success("Profile image has been updated successfully"),m.reset(),r&&(r.value=null),_.value=null,w.value=!1},onError:()=>{g.error("Unable to update profile image")}})},A=()=>{l.clearErrors();const r=T(l.dob).format("YYYY");if(new Date().getFullYear()-r<18)return g.error("You must be greater than 18 years old");l.post(route("user.update-profile",n.value.id),{preserveScroll:!0,onSuccess:()=>{g.success("Profile has been updated successfully")},onError:()=>{g.error("Unable to update profile.")}})};return(r,s)=>(i(),d(D,null,[u(t(O),{title:"User"}),u(q,null,{default:x(()=>[u(H,{step_one:F}),oe,e("div",le,[u(P,{errors:t(m).errors},null,8,["errors"]),e("div",ae,[e("div",ne,[e("div",re,[e("div",ie,[t(n).avatar?(i(),d("img",{key:0,src:t(n).avatar,alt:"user image",width:"150",height:"150",class:"rounded-circle"},null,8,de)):(i(),d("img",{key:1,src:t(Q),alt:"user image",width:"150",height:"150",class:"rounded-circle"},null,8,ce)),e("button",{class:"text-danger",onClick:s[0]||(s[0]=o=>w.value=!0)},[u(t(Z),{color:"text-danger",icon:"material-symbols:edit",height:"20"})])]),e("div",ue,[e("p",null,[pe,e("span",me,v(t(n).first_name)+" "+v(t(n).last_name),1)]),e("p",null,[_e,e("span",fe,v(t(n).email),1)]),e("p",null,[he,S(),e("span",ve,v(t(n).role),1)])])])])]),be,e("div",ge,[u(P,{errors:t(l).errors},null,8,["errors"]),e("div",ye,[e("div",we,[xe,c(e("input",{type:"email",id:"email",class:"form-control",placeholder:"Email address","onUpdate:modelValue":s[1]||(s[1]=o=>t(l).email=o)},null,512),[[b,t(l).email]])]),e("div",Ce,[Ue,c(e("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":s[2]||(s[2]=o=>t(l).gender=o)},Pe,512),[[I,t(l).gender]])]),e("div",Ve,[Ee,c(e("input",{type:"tel",name:"phone",id:"phone",class:"form-control",placeholder:"Phone number","onUpdate:modelValue":s[3]||(s[3]=o=>t(l).phone=o)},null,512),[[b,t(l).phone]])]),e("div",Me,[Ye,c(e("input",{type:"text",class:"form-control",id:"address",placeholder:"Address","onUpdate:modelValue":s[4]||(s[4]=o=>t(l).address=o)},null,512),[[b,t(l).address]])])])]),e("div",$e,[e("div",je,[e("div",Fe,[Be,c(e("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":s[5]||(s[5]=o=>t(l).country=o),onChange:s[6]||(s[6]=o=>j(t(l).country))},[(i(!0),d(D,null,M($.value,o=>(i(),d("option",{key:o,value:o},v(o.name),9,Le))),128))],544),[[I,t(l).country]])]),e("div",Ne,[Re,c(e("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":s[7]||(s[7]=o=>t(l).state=o)},[(i(!0),d(D,null,M(V.value,o=>(i(),d("option",{key:o,value:o.name},v(o.name),9,Ae))),128))],512),[[I,t(l).state]])]),e("div",Ge,[Oe,c(e("input",{type:"text",class:"form-control",id:"city",placeholder:"City","onUpdate:modelValue":s[8]||(s[8]=o=>t(l).city=o)},null,512),[[b,t(l).city]])]),e("div",Te,[ze,c(e("input",{type:"date",class:"form-control",id:"date",placeholder:"date","onUpdate:modelValue":s[9]||(s[9]=o=>t(l).dob=o)},null,512),[[b,t(l).dob]]),Je])])]),e("div",Xe,[e("div",qe,[e("div",He,[e("button",{onClick:A,disabled:t(l).processing,class:"btn btn-success w-100"},[Qe,t(l).processing?(i(),d("span",We)):C("",!0)],8,Ke)])])])])]),_:1}),u(K,{show:w.value,size:"modal-md",footer:!0,onClose:s[15]||(s[15]=o=>w.value=!1)},{header:x(()=>[Ze]),body:x(()=>[u(P,{errors:t(m).errors},null,8,["errors"]),e("div",es,[e("button",{onClick:s[10]||(s[10]=o=>U(p)?p.value="upload":p="upload"),class:"btn btn-sm btn-outline-success"}," Upload "),e("button",{onClick:s[11]||(s[11]=o=>U(p)?p.value="snap":p="snap"),class:"btn btn-sm btn-outline-success"},[S(" Take Picture "),c(e("span",ss,null,512),[[Y,t(f)]])])]),ts,e("div",os,[e("div",null,[t(p)=="upload"?(i(),d("div",ls,[e("input",{type:"file",name:"file-input",id:"file-input",class:"file-input__input",accept:".jpg, .jpeg, .png",onChange:s[12]||(s[12]=o=>L(o))},null,32),as])):C("",!0),t(p)=="snap"?(i(),d("div",ns,[u(t(W),{resolution:{width:150,height:150},ref_key:"camera",ref:k,autoplay:"",onLoading:s[13]||(s[13]=o=>U(f)?f.value=!0:f=!0),onStarted:s[14]||(s[14]=o=>U(f)?f.value=!1:f=!1)},null,512),e("div",{class:"d-flex justify-content-center mt-1"},[e("button",{onClick:B,class:"btn btn-sm btn-primary"}," Snap ")])])):C("",!0)]),t(_)?(i(),d("div",rs,[e("img",{src:t(_),alt:"preview",class:"rounded shadow"},null,8,is),e("button",{onClick:N,class:"btn btn-sm btn-danger mt-1"}," Delete ")])):C("",!0)])]),footer:x(()=>[e("button",{onClick:R,disabled:!t(_),class:"btn btn-success w-100"},[S(" Upload "),c(e("span",cs,null,512),[[Y,t(m).processing]])],8,ds)]),_:1},8,["show"])],64))}},xs=te(us,[["__scopeId","data-v-f47f18b1"]]);export{xs as default};
