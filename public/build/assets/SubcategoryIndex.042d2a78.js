import{r as S,P as w,o as n,a as r,b as a,u as s,X as L,w as b,d as e,g as x,j as k,v as O,F as y,e as C,t as m,C as V,i as f,q as M,k as p,p as U,l as $}from"./app.281e0c63.js";import{A as j}from"./AdminLayout.8a21602c.js";import{D as T}from"./DashboardBreadcrump.8e740981.js";import{_ as q}from"./NoResult.5fa7e996.js";import{M as P}from"./Modal.38fa62a9.js";import{_ as R}from"./FormError.f65ecb40.js";import{I as h}from"./iconify.a9b16b93.js";import{_ as z}from"./_plugin-vue_export-helper.cdc0426e.js";/* empty css                                                              */const i=d=>(U("data-v-8ce136d6"),d=d(),$(),d),J=i(()=>e("hr",null,null,-1)),X={class:"container"},Y={class:"row"},G={class:"col-lg-12 mb-2"},H={class:"category"},K={class:"accordion accordion-flush",id:"accordionFlushExample"},Q={class:"accordion-item"},W={class:"accordion-header",id:"flush-headingOne"},Z={class:"accordion-button collapsed fw-bolder bg-success text-light shadow-sm",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"},ee={id:"flush-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"flush-headingOne","data-bs-parent":"#accordionFlushExample"},te={class:"accordion-body p-1"},se={class:"row"},oe={class:"my-1 col-lg-4 col-md-6"},le=i(()=>e("label",{for:"category_image",class:"form-label"},"Categories",-1)),ae=i(()=>e("option",{selected:"",disabled:""},"Select Category",-1)),ce=["value"],ne={class:"my-1 col-lg-4 col-md-6"},re=i(()=>e("label",{for:"category_title",class:"form-label"},"Subcategory Title",-1)),ie={class:"my-1 col-lg-4 col-md-6"},de=i(()=>e("label",{for:"category_image",class:"form-label"},"Subcategory Image",-1)),ue={class:"mt-1"},_e={key:0,class:"img_container position-relative"},ge=["src"],be=["disabled"],me=i(()=>e("span",null,"Save",-1)),he={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},pe={class:"col-lg-12 mt-1"},ye={class:"category__table"},fe={key:0,class:"table-responsive"},ve={class:"table table-hover table-bordered"},Se=i(()=>e("thead",{class:"table-dark"},[e("tr",null,[e("th",{scope:"col"},"S/N"),e("th",{scope:"col"},"Id"),e("th",{scope:"col"},"Image"),e("th",{scope:"col"},"Category"),e("th",{scope:"col"},"Subcategory Title"),e("th",{scope:"col"},"Actions")])],-1)),we={scope:"row"},xe={scope:"row"},ke=["src"],Ce={class:"d-flex gap-2 justify-content-start align-items-center"},Ie=["onClick"],De={key:1,class:"text-center"},Ne={class:"modal-title text-warning d-flex align-items-center gap-1 fw-bolder"},Ee=i(()=>e("h5",{class:"fw-bold text-secondary"}," All Products attached to this subcategory will also be deleted. ",-1)),Ae=i(()=>e("p",{class:"text-danger"},"Do you want to delete this subcategory?",-1)),Be={class:"d-flex gap-1 align-items-center"},Fe=i(()=>e("span",null,"Yes, Delete",-1)),Le={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},Oe={__name:"SubcategoryIndex",props:["subcategories","categories"],setup(d){const u=S(!1),_=S(null),g=w({id:null}),o=w({subcategory_img:null,subcategory_title:null,category_id:null,folder:"subcategory"}),I={slug:"Subcategory",link:!1,route_name:null},D=c=>{u.value=!0,g.id=c},N=()=>{g.delete(route("admin.subcategory.destroy",g.id),{preserveScroll:!0,onSuccess:()=>{p.success("Subcategory has been deleted successfully"),g.reset(),u.value=!1},onError:()=>{p.error("Unable to save subcategory")}})};function E(){const c=document.getElementById("subcategory_image");c.value=null,_.value=null,o.subcategory_img=null}function A(c){const l=c.target.files[0];o.subcategory_img=l;const t=new FileReader;t.onloadend=()=>{_.value=t.result},t.readAsDataURL(l)}const B=()=>{o.clearErrors();const c=document.getElementById("subcategory_image");o.post(route("admin.subcategory.store"),{preserveScroll:!0,onSuccess:()=>{p.success("New Subcategory has been saved successfully"),o.reset(),c&&(c.value=null),_.value=null},onError:()=>{p.error("Unable to save new subcategory")}})};return(c,l)=>(n(),r(y,null,[a(s(L),{title:"SubCategory"}),a(j,null,{default:b(()=>[a(T,{step_one:I}),J,e("div",X,[a(R,{errors:s(o).errors},null,8,["errors"]),e("div",Y,[e("div",G,[e("div",H,[e("div",K,[e("div",Q,[e("h2",W,[e("button",Z,[a(s(h),{icon:"eos-icons:content-new",class:"me-1 text-light",height:"20"}),x(" Subcategory ")])]),e("div",ee,[e("div",te,[e("div",se,[e("div",oe,[le,k(e("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":l[0]||(l[0]=t=>s(o).category_id=t)},[ae,(n(!0),r(y,null,C(d.categories,t=>(n(),r("option",{key:t.id,value:t.id},m(t.title),9,ce))),128))],512),[[O,s(o).category_id]])]),e("div",ne,[re,k(e("input",{type:"text",class:"form-control",id:"category_title",placeholder:"subcategory","onUpdate:modelValue":l[1]||(l[1]=t=>s(o).subcategory_title=t)},null,512),[[V,s(o).subcategory_title]])]),e("div",ie,[de,e("input",{type:"file",class:"form-control",id:"subcategory_image",onChange:l[2]||(l[2]=t=>A(t)),accept:".jpg, .jpeg, .png"},null,32),e("div",ue,[_.value?(n(),r("div",_e,[e("img",{src:_.value,alt:"product preview",width:"100",class:"rounded shadow-sm"},null,8,ge),e("button",{class:"",onClick:E},[a(s(h),{color:"text-danger",icon:"material-symbols:edit",height:"15"})])])):f("",!0)])])]),e("button",{disabled:s(o).processing||!s(o).subcategory_img||!s(o).category_id||!s(o).subcategory_title,onClick:B,class:"btn btn-success"},[me,s(o).processing?(n(),r("span",he)):f("",!0)],8,be)])])])])])]),e("div",pe,[e("div",ye,[d.subcategories.length?(n(),r("div",fe,[e("table",ve,[Se,e("tbody",null,[(n(!0),r(y,null,C(d.subcategories,(t,F)=>{var v;return n(),r("tr",{key:t.id},[e("th",we,m(F+1),1),e("td",xe,m(t.id.substring(0,7))+"...",1),e("td",null,[e("img",{src:(v=JSON.parse(t.banner_img))==null?void 0:v.img_url,width:"40",alt:"sub category image"},null,8,ke)]),e("td",null,m(t.category.title),1),e("td",null,m(t.title),1),e("td",Ce,[a(s(M),{href:c.route("admin.subcategory.edit",t.id),class:"btn btn-success btn-sm"},{default:b(()=>[a(s(h),{icon:"material-symbols:edit-square-outline",height:"17"})]),_:2},1032,["href"]),e("button",{onClick:Ve=>D(t.id),class:"btn btn-danger btn-sm"},[a(s(h),{icon:"ic:outline-delete-forever",height:"17"})],8,Ie)])])}),128))])])])):(n(),r("div",De,[a(q,{text:"No SubCategories found",link:!1})]))])])])])]),_:1}),a(P,{show:u.value,size:"modal-sm",footer:!0,onClose:l[4]||(l[4]=t=>u.value=!1)},{header:b(()=>[e("h4",Ne,[a(s(h),{icon:"icon-park-outline:caution"}),x(" Caution ")])]),body:b(()=>[Ee,Ae]),footer:b(()=>[e("div",Be,[e("button",{onClick:N,class:"btn btn-sm btn-danger"},[Fe,s(g).processing?(n(),r("span",Le)):f("",!0)]),e("button",{onClick:l[3]||(l[3]=t=>u.value=!1),class:"btn btn-sm btn-success"}," No, Cancel ")])]),_:1},8,["show"])],64))}},Je=z(Oe,[["__scopeId","data-v-8ce136d6"]]);export{Je as default};
